# 推导式

## 介绍

在日常的使用中常常会有这样的场景：需要生成一个列表（或字典、集合），生成的规则比较简单，但是每次都通过循环时间很不优雅，python内置一个叫做推导式的语法糖，解决了这个问题；
从数学角度上看列表推导式,它更想是数学中的集合对象；如数学中描述 数字大于5的整数集合一般这么表示:`{x | x > 5 }`,python的推导式从逻辑角度看更符合数学上的描述;

```python
a = []
for i in range(100):
    a.append(i)
```

```python
>>>a
[0,1,2,...,99]
```

```python
>>>a=[i for i in range(100)]
>>>a
[0,1,2,3,...,99]
```

## 推导式使用

列表推导式看起来就是`[ f(x) for x in A if P(x)]`格式,其中f(x)是一个入参为`x`的函数, `for x in A`为主干体循环, `if P(x)`为判断语句, P(x)为返回 `True` `False`的函数;如果为`True`则列表增加一个 `f(x)`的返回值,如果为`False`则不执行任何操作;

```python
>>>a = [i for i in range(100) if i%2==0]
>>>a
[0,2,4,...,98]
```

上述的代码等效于：

```python
a = []
for i in range(100):
    if i%2==0:
        a.append(i)
```

执行单元内不是只可以有一层循环，实际上推导式不限制循环的数量，例如：

```python
>>>a = [(i,j) for i in range(10) for j in range(10) if i<5 and j <5]
[(0, 0), (0, 1), (0, 2), (0, 3), (0, 4), (1, 0), (1, 1), (1, 2), (1, 3), (1, 4), (2, 0), (2, 1), (2, 2), (2, 3), (2, 4), (3, 0), (3, 1), (3, 2), (3, 3), (3, 4), (4, 0), (4, 1), (4, 2), (4, 3), (4, 4)]
```

除了列表有推导式外，我们常用的字典和集合也是有推导式的，只有元组是没有推导式的；

```python
>>> names = ['bob','alibaba','cathy']
>>> ages = [21,23,18]
>>> dict = {key:value for key in names for value in ages}
>>> dict
{'bob': 18, 'alibaba': 18, 'cathy': 18}
```

```python
>>> s = {x*2 for x in range(10)}
>>> s
{0, 2, 4, 6, 8, 10, 12, 14, 16, 18}
```

## 生成器,生成器表达式和推导式

生成器又称为generator，属于python的高级应用，它的特点是支持next函数,每次**生成**一个元素,可以循环获取直到生成器最后一个对象报错,生成器主要用来解决大数据量下的内存使用问题。
生成器表达式从样式上看跟推导式很像,只需要把`[]`替换成`()`即可;