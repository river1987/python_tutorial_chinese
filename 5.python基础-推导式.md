# 推导式

## 介绍

在日常的使用中常常会有这样的场景：需要生成一个列表（或字典、集合），生成的规则比较简单，但是每次都通过循环时间很不优雅，python内置一个叫做推导式的语法糖，解决了这个问题；
也就是说各种推导式，解决的是用一行生成对应的列表（或字典、集合）的问题，并没有提升执行的效率；

```python
a = []
for i in range(100):
    a.append(i)
```

```python
>>>a
[0,1,2,...,99]
```

```python
>>>a=[i for i in range(100)]
>>>a
[0,1,2,3,...,99]
```

## 推导式使用

列表推导式看起来就是由`[`  `]` 包裹一个执行单元，执行单元常用循环+判断两种语句；

```python
>>>a = [i for i in range(100) if i%2==0]
>>>a
[0,2,4,...,98]
```

上述的代码等效于：

```python
a = []
for i in range(100):
    if i%2==0:
        a.append(i)
```

执行单元内不是只可以有一层循环，实际上推导式不限制循环的数量，例如：

```python
>>>a = [(i,j) for i in range(10) for j in range(10) if i<5 and j <5]
[(0, 0), (0, 1), (0, 2), (0, 3), (0, 4), (1, 0), (1, 1), (1, 2), (1, 3), (1, 4), (2, 0), (2, 1), (2, 2), (2, 3), (2, 4), (3, 0), (3, 1), (3, 2), (3, 3), (3, 4), (4, 0), (4, 1), (4, 2), (4, 3), (4, 4)]
```

除了列表有推导式外，我们常用的字典和集合也是有推导式的，只有元组是没有推导式的；

```python
>>> names = ['bob','alibaba','cathy']
>>> ages = [21,23,18]
>>> dict = {key:value for key in names for value in ages}
>>> dict
{'bob': 18, 'alibaba': 18, 'cathy': 18}
```

```python
>>> s = {x*2 for x in range(10)}
>>> s
{0, 2, 4, 6, 8, 10, 12, 14, 16, 18}
```

## 生成器和推导式

生成器又称为generator，属于python的高级应用，格式为`(` `)`包括起来的执行单元，不能认为他是元组推导式，生成器主要用来解决大数据量下的内存使用问题。