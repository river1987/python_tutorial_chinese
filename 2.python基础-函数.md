# python技术基础-函数

## 函数介绍

绝大部分语言都有函数，函数主要用来抽象可以执行单元，对外屏蔽具体的实现方式，通过出入参的方式实现数据的流通；
对python来说，函数指的是python中有组织的可重复执行的功能单元。良好的函数使用，可以减少代码的缩进，提高代码简洁可读性、增加代码的重复利用率。
python内置很多实用函数，如：`len`、`print`、`id`等等；

## 定义函数

python中函数的定义使用`def`前缀加函数名称 `()`和`:`，如：

```python
def function_name(parameters):
    do_something...
    return values
```

- `function_name`指的就是定义的函数名称，后续的函数调用使用的唯一名称；***重复的名称在执行`MRO`过程中产生覆盖***；
- `paramenters`指函数的入参，与其他语言不同，python传递参数均为`实参`，也就是参数传递过程中不存在默认的对象拷贝；
- 函数执行完成后通过`return`语句返回一个或多个值，如返回的是多个值，则通过`,`分隔，返回时默认将所有参数组合成一个元组；`return`非必须，函数可以没有显示返回，则自动返回`None`；

## 调用函数

函数需要调用时则直接使用`函数名`+`(`+`参数`+`)`的方式调用，如下：

```python
def print_me(name):
    print('my name is:' + name)
```

```python
>>>print_me('jiangfeng')
my name is jiangfeng
```

获取返回值时则直接将函数作为`==`的右操作数即可；

```python
def return_value(value):
    return value
```

```python
>>>result = return_value(1205)
>>>result
1205
```

函数执行成功则会返回值，如果调用失败，则会爆出异常；
调用时参数数量异常，会报参数错误；

    ```python
    def func_1(param):
        print(param)
    ```

    ```python
    >>>func_1(1,2)
    Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    TypeError: func_1() takes 1 positional argument but 2 were given
    ```

因python中函数定义时不需要指明参数类型，所以函数调用时可以是任意类型，但在函数体内执行时需要注意参数类型，类型不对执行时会报错，甚至执行错误；

```python
def func_2(param):
    param += 1 #  期待param为一个int或者float对象，支持与整数的加法
    print(param)
```

```python
>>>func_2(2)
3
>>>func2('no')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in func_2
TypeError: can only concatenate str (not "int") to str
```

上述的行为不是python的缺陷，实际上时python语言的一大特点，一个理念。被称为“鸭子类型”。具体的含义在类章节中解释。
为了保证输入的参数是`int`或者`float`类型，那么可以通过下面这种方式限制：

```python
def func_3(param):
    if isinstence(param,(int,float)):
        do_something...
    else:
        do_nothing_or_raise_error...
```


## 函数参数

## 匿名函数

## 作用域

引入一个非常重要的概念，对象的作用域；与C++、java类型，python内部也有一套命名空间的逻辑，对象在一个空间中创建，可以在这个空间中查询，超出这个作用域则无法获取到，python会报错，不理解作用域则会出现程序编写的逻辑错误。

1. 样例1

    ```python
    def f_1(a):
        a = a+1
        print('inter function  a value is :'+str(a))
    ```

    ```python
    >>>a = 0
    >>>f_1(a)
    inter function  a value is :1
    >>>print('outer function  a value is :'+str(a))
    outer function  a value is :0
    ```

2. 样例2

    ```python
    def f_2():
        global a
        a = a + 1
        print('inter function  a value is :' + str(a))
    ```

    ```python
    >>>a = 0
    >>>f_2()
    inter function  a value is :1
    >>>print('outer function  a value is :'+str(a))
    outer function  a value is :1
    ```

3. 样例3

    ```python
    a = 0
    b = 1
    ```

    - 将上述代码保存为`module.py`
    - 新建文件`b.py`,并在首行输入`from module import a`
    - 那么在当前b.py文件的作用域中就有了a这个对象；可以直接使用它；

## tricks

1. 函数定义中，不允许（不报错）使用`[]`作为默认值