# PYTHON技术基础（简介、语法、变量、控制）

[TOC]

## PYTHON 简介

### PYTHON 起源

1989年圣诞期间，*Gudio van Rossum*为了打发时间，基于当时使用的**ABC**语言，开发了一种新型的解释型语言。因为喜欢看BBC电视台飞行马戏团(Monty Python’s Flying Circus)节目，所以给这种新的语言取名PYTHON。

PYTHON被称为**胶水语言**，它可以把不同语言编写的程序实现无缝拼接，发挥不同语言的优势，例如：因为python的运行速度不快，可以通过c\c++编写部分模块功能，并通过python调用实现速度的提升。

### 人生苦短，我用Python

Python是一门入门相对简单，但功能非常强大的编程语言，它的特点是：简单、解释性、动态、丰富的内置和外部库。目前在WEB服务、数据分析、爬虫、运维、金融、人工智能等领域广泛应用，根据TIOBE统计，PYTHON排名持续上升，荣获“2018年度编程语言”称号可以说它在编程界是一个非常时髦的多面手。

### PYTHON的优缺点

#### 优点

- 简单易学
- 开源
- 面向对象
- 丰富的库
- 扩展性强

#### 缺点

- 运行速度相对慢
- 企业级应用不足
- Python2和Python3割裂

### PYTHON安装

#### 重要网址

- 主页 [https://www.python.org](https://www.python.org)
- 文档 [https://www.python.org/doc/](https://www.python.org/doc/)
- 模块下载 [https://www.python.org/pypi](https://www.python.org/pypi)
- 集成分发包 [https://www.anaconda.com/](https://www.anaconda.com/)
- 问题搜索 [https://stackoverflow.com/](https://stackoverflow.com/)
- jupyter工具集 [https://jupyter.org/](https://jupyter.org/)
  
#### 安装

- 在PYTHON[官网](https://www.python.org)下载对应版本的软件([windows](https://www.python.org/ftp/python/3.7.2/python-3.7.2-amd64.exe),[linux](https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tgz),[macOS](https://www.python.org/ftp/python/3.7.2/python-3.7.2-macosx10.6.pkg))或直接下发PYTHON[集成分发包](https://www.anaconda.com/distribution/#download-section)
- Python2 VS **Python3**

#### 编程工具

- 默认 IDLE
- 其他常见环境
  - pycharm
  - eric
  - vscode
  - wingIDE

#### 模块安装

- pip安装
- conda安装

#### FAQ

- PEP

## PYTHON 语法

### 第一个程序

- 交互式

    ```python
    >>> 3+5
    8
    >>> import math
    >>> math.sqrt(9)
    3.0
    >>> 3*(2+6)
    24
    >>> 2/0
    Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    ZeroDivisionError: division by zero
    ```

- 脚本式
    1. 打开编程环境或文本编辑器，输入python语句

    ```python
    for i in range(10):
        j = i +1
        print(j)
    ```

    1. 保存文件为test.py
    2. 在cmd环境下执行 `python test.py`
    3. 查看程序结果

    ```python
    >>> python test.py
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    9  
    10
    ```

### PYTHON 标识符

开发人员在程序中自定义的一些符号和名称，如文件名、变量名、类名、函数名等。

python标识符由字母、数字、下划线组成。

#### 标识符注意事项：

> 1. 不能以数字开头
> 2. 大小写敏感
> 3. 下划线开头有特殊意义，大下划线_foo表示私有属性，不能通过import 方式导入，双下划线开头和结尾__foo__表示python内置特殊标识，例如：__mian__ __init__等等
>4. 不建议使用保留字

#### 保留字

保留字是python中具有特殊功能的标识符，也被称为关键字。因为已经被python内部使用，不允许开发者自己定义和保留字名称相同的标识符。

保留字清单：

```python
>>> import keyword
>>> keyword.kwlist
['False', 'None', 'True', 'and', 'as', 'assert', 'async', 'await', 'break', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except', 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is', 'lambda', 'nonlocal', 'not', 'or', 'pass', 'raise', 'return', 'try', 'while', 'with', 'yield']
```

### 缩进及代码块

python语言与其他语言最大的区别是PYTHON使用缩进表示代码块，其他语言一般使用**{}**表示代码块。
缩进可以使用空格、TAB，但不建议混合使用，同一级代码块内缩进必须相同。
下面是缩进不一致的代码块

```python
for i in range(10):
   j = i +1
    print(j)
```

结果为：

```python
[Running] python -u "c:\Users\RIVER\Desktop\test.py"
  File "c:\Users\RIVER\Desktop\test.py", line 3
    print(j)
    ^
IndentationError: unexpected indent

[Done] exited with code=1 in 2.44 seconds
```

## PYTHON 变量

变量是内存中的一块区域，用于存储程序运行中的数据。内存地址的申请、数据删除均由python自动执行，基本不需要人工操作。除此之外，python变量不需要提前申明，随时申请随时使用，并且不需要申明变量真实的内容，不用管是数字、字符串、数据结构。

变量所处的内存位置可以通过**id**函数进行查看

### 变量赋值

一般使用 **等号(=)** 进行赋值，**等号(=)** 左边为变量，**等号(=)** 右边为变量的值。

```python
>>> a = 1
>>> print(a)
1
```

除了单变量赋值之外，还可以使用多变量赋值。

```python
>>> a,b = 1,2
>>> print(a)
1
```

```python
>>> a = b = 1
>>> print(a)
1
```

### 变量类型

python中内置的变量类型有5种：

- Number 数字
- String 字符串
- List 列表
- Tuple 元组
- Dictionary 字典

#### 1. Number 数字

数字类型用于存储数值，它为不可变类型*

- 数据创建

    ```python
    var = 1
    ```

- 数据删除

    ```python
    del var
    ```

- 数据操作（+，-，*，/,//,%,**）

    ```python
    >>> 2+2
    4
    >>> 50-5*6
    20
    >>> (50-5*6)/4
    5.0
    >>> 8/5
    1.6
    >>> 13//5
    2
    >>> 10%3
    1
    >>> 2**7
    128
    ```

- 数据转换

    ```python
    >>> a = int(1.0) # 显示转换float -> int
    >>> a
    1
    >>> b = float(a) # 显示转换int -> float
    >>> b
    1.0
    >>> c = a + b # 隐式转换int -> float
    >>> c
    2.0
    ```

数字类型有四种不同数字类型：**int**、**long**、**float**、**complex**

|int|long|float|complex|
|---|----|-----|-------|
|10 |211111L|10.0|3.14j|
|0x23|5555L|-23e100|3e+21j|

*\*在python3中**long**类型已经删除，合并到**int**中*

#### 2. String 字符串

字符串类型对象是由成对 **'**、**"** 、**'''** 、**"""** 包裹起来的对象， **\\** 用来转义引号，字符串类型对象为不可变类型。

```python
>>> str = 'Hello World!'
>>> print(str)
Hello World!
>>> str2 = "\"Yes,\" he said."
>>> print(str2)
"Yes," he said.
>>> str3 = '"Yes," he said.'
>>> print(str3)
"Yes," he said.
```

''' 和 """ 主要用在多行的字符串对象中，不需要通过换行符表示换行

```python
>>> str4 = '''line one
... line two'''
>>> print(str4)
line one
line two
>>> str5 = 'line one\nline two'
>>> print(str5)
line onw
line two
```

##### String字符串操作

- 字符串可以通过`+`操作符连结在一起，可以通过`*`操作符进行重复：

```python
>>> str6 = 'aaa' + 'bbb'
>>> print(str6)
aaabbb
>>> str7 = 'a' * 3
>>> print(str7)
aaa
```

- 字符串对象也支持切片操作：

```python
>>> str8 = 'abcdefg'
>>> str8[0]
a
>>> str8[-1]
g
>>> str9 = str8[0:3]
>>> print(str9)
abc
```

- 字符串长度计算非常方便，通过python内置`len`方法直接计算unicode字符长度：

```python
>>>len(str9)
3
```

字符串对象是不可变的，对字符串的操作实际均是产生一个新的字符串对象：

```python
>>> str10 = 'abc'
>>> str11 = str10 + 'd'
>>> id(str10)
2932457859424
>>> id(str11)
2932463266256
```

目前有两种常用的字符串格式化输出方式：% 号式 和format函数式：

```python
>>> str12 = 'my name is %(name)s' %{'name':'river'}
>>> str12
my name is river
>>> str13 = 'my name is {name}'.format(name='river')
>>> str13
my name is river
```

#### 3. List 列表

Python中的列表是非常常用的一种内置对象类型，其内部实现是有C进行实现，所以运行速度比较快。

List对象是一种容器对象，与数字、字符串对象不同，它是可变对象。

List对象可以被看做是一排大小相同的框，可以存储其他Python对象。

Python中使用`[]`表示列表对象。

##### List对象操作

- List对象初始化可以直接通过内置的`list`函数进行,也可以使用`[]`直接包括一列`,`分割的对象：

```python
>>> List1 = list(('a',1,'c')
>>> print(List1)
['a',1,'c']
>>> List2 = ['a','b','c']
```

- List对象的复制，可以通过切片法复制和赋值法复制两种方式，两种方式的结果有差异：

```python
>>> List3 = ['a','b','c']  # 切片法复制
>>> List4 = List3[:]
>>> List3.append('d')
>>> List4.append('e')
>>> List3
['a','b','c','d']
>>> List4
['a','b','c','e']
>>> List5 = List3  # 赋值法复制
>>> List5.append('e')
>>> List5
['a','b','c','d','e']
>>> List3
['a','b','c','d','e']
```

- List对象长度可以跟String对象一样可以通过内置的`len`函数直接计算：

```python
>>>len(List1) # 由于List对象通过C语言编写，List对象的长度可以直接计算内存大小获取，速度非常快。
3
```

- List对象可以支持切片操作，方便获取特定位置的对象：

```python
>>>List1[0]
'a'
>>>List1[0:2]
['a',1]
```

- 两个列表对象相加可以得到新的列表对象：

```python
>>> List1 + ['d']
['a',1,'c','d']
```

- List对象增加对象、删除对象可以通过对象内置的`append`、`pop`、`extend`、`remove`:

```python
>>> List1
['a',1,'c']
>>> List1.append('d') # 在列表后增加元素
['a',1,'c','d']
>>> List1.pop() # 弹出最后一个对象做为返回值，原列表删除最后一个对象
'd'
>>> List1
['a',1,'c']
>>> List1.extend(['d']) # extend方法将第二个列表合并到第一个列表中
>>> List1
['a',1,'c','d']
>>> List1.remove('a')
>>> List1
[1,'c','d']
```

#### 4. Tuple 元组

与列表对象类似，Python中还有一种集合对象具备List对象的大部分特性，但元组不能赋值，是只读对象。

Python中使用`()`表示元组对象

元组一般使用`()`或者Python内置函数`tuple`初始化：

```python
>>> Tuple = () # 一个空元组
>>> Tuple2 = tuple(('a','b','c'))
```

##### Tuple元组操作

- 元组的查询可以通过下标法直接查看：

```python
>>> Tuple2[0]
'a'
```

- 也可通过切片法获取一个新元组：

```python
>>> Tuple2 = Tuple[0:2]
>>> Tuple2
('a','b')
```

- 元组长度也可以通过Python内置的`len`方法获取

```python
>>> len(Tuple2)
2
```

- 元组解包特性：

```python
>>> a,b = (1,2)
>>> a
1
>>> b
2
```

- 元组无法赋值，赋值则会报错：

```python
>>> Tuple2[2] = 1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment
```

#### 5. Dictionary 字典对象

Dictionary 字典对象是Python中除List对象外最常用的对象，与List相同的是，他们都是容器类型对象，与List对象不同的是，字典对象是无序对象集合。

Python中使用`{key:value,...}`表示字典对象,字典对象中的每个对象又由`key`、`value`两个对象组成，呈现的格式一般是`key:value`。

字典对象的实现方式是通过对`key`进行散列后存储，所以字典对象的内存利用率与List对象相比低很多。

字典对象初始化可以直接使用花括号`{}`进行初始化，也可以使用Python内置`dict`内置函数进行初始化：

```python
>>> Dict1 = {'a':1,'b':2,'c'=3}
>>> Dict1
{'a':1,'b':2,'c':3}
>>> Dict2 = dict(a=1,b=2,c=3)
>>> Dict2
{'a':1,'b':2,'c':3}
```

##### Dcitionary字典操作

- 字典对象值的查询和更新：

```python
>>> Dcit2['a']
1
>>> Dict2['a'] = 0
>>> Dict2
{'a':0,'b':2,'c'=3}
>>> Dict2.get('a')
1
>>> Dict2.get('d',None) # 如果没有对应的key，默认返回None对象，也可以指定第二个入参为get方法未命中时返回的默认值
None
>>> Dict2.setdefault('d',None) # 如果key不在字典的键中，则设置第二个参数为其value
>>> Dict2.update({'a':1}) # 更新字典中对应的key的值
>>> Dict2
{'a':1,'b':2,'c':3,'d':None}
```

- 字典对象值删除可以通过字典对象内置`clear`、`pop`、`popiten`进行：

```python
>>> Dict1.pop('a') # 从字典集合中删除key对象，弹出key值对应的value
1
>>> Dict1
{'b':2,'c':3}
>>> Dict1.popitem() # 随机弹出一个内部对象作为返回值
('a',1)
>>> Dict2.clear() # 清空整个字典
{}
```

- 字典对象迭代,通过字典内置的`keys`、`values`、`items`获取其中的所有的键和值

```python
>>> Dict3 = {'a':1,'b':2,'c':3}
>>> Dict3.keys()
['a','b','c']
>>> Dict3.values()
[1,2,3]
>>> Dict3.items()
[('a',1),('b',2),('c',3)]
```

#### 6. Set集合对象

Set对象相比上面的List、Dictionary、Number对象来说要不常用得多，但是它具备数学上集合的一些特性，在一些特殊场合能减少代码复杂度。

Set对象也是一种容器对象，其内部对象具有唯一性，既可不可以重复。

Set对象也使用`{}`表示，但跟字典相比，内部对象不相同。

Set对象初始化直接使用Python内置的`set`函数或者直接使用花括号`{}`包裹逗号分隔的对象。

```python
>>> Set1 = set((1,2,3))
>>> Set1
{1,2,3}
>>> Set2 = {1,2,3}
>>> Set2
{1,2,3}
```

Set对象采用散列技术存储，所以随机访问速度比较快，但不具备下标方式访问和切片方法。

```python
>>> 1 in Set1  # 判断1是否在集合中
True
>>> Set1[0]  # 下标法访问集合对象会报错
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'set' object does not support indexing
>>> Set[0:1] # Set对象也不支持切片
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'set' object is not subscriptable
```

##### Set集合操作

- 通过集合对象的`add`方法和`update`方法增加内部对象：

```python
>>> Set1.add(4) # 增加对象，如果对象已经存在也不会报错
>>> Set1
{1,2,3,4}
>>> Set1.update([5,6]) # update方法可以使用列表增加内部对象
>>> Set1
{1,2,3,4,5,6}
```

- 通过集合对象的`remove`方法删除一个对象，如果对象不存在则会报错，或者使用`discard`，对象不存在则不会报错：

```python
>>> Set1.remove(4)
>>> Set1
{1,2,3,5,6}
>>> Set1.discard(4)
>>> Set1
{1,2,3,5,6}
```

- 计算内部对象数量可以使用Python内置`len`函数：

```python
>>> len(Set1)
5
```

- 清空对象可以跟字典对象类似，使用`clear`方法：

```python
>>> Set1.clear()
>>> Set1
set()
```

##### Set集合特殊用法

使用Set获取不重复的唯一值：

```python
>>> List = [1,1,2,3]
>>> Set3 = set(List)
>>> Set3
{1,2,3}
```

### 特殊说明

```python
>>> a = 1
>>> b = 1
>>> id(a)
>>> id(b)
```

```python
>>> a = 10000
>>> b = 10000
>>> id(a)
>>> id(b)
```

## Python 控制

跟其它语言相同，Python语言也有**条件判断**、**循环**控制模块，另外还包含`pass`、`continue`、`break`三个常用的控制关键字。

### 条件判断

```flow
st=>start
e=>end
cond=>condition: 判断？
io1=>inputoutput: 输出
st->cond
cond(yes)->e
cond(no,right)->io1->e
```

Python中主要使用`if--else--`关键字进行判断代码块的结果，如果结果非空字符串`''`、数字`0`、`None`、`False`、空数组`[]`、空元组`()`、空集合`{}`之一，则执行代码`if`逻辑快中的代码，如果是上述字段之一，则执行else代码块代码。

```python
if score > 60:
  print('congratulations! you pass the exam')
else:
  print('sorry! you did not pass the exam')
```

如要反转判断条件，可以使用`not`进行条件判断反转：

```python
if not score > 60:
  print('sorry! you did not pass the exam')
else:
  print('congratulations! you pass the exam')
```

在其他语言中一般使用操作符`&&`、`||`表示与和或的关系，但在Python中没有这两个操作符，而使用关键字`and`、`or`代替：

```python
if score > 60 and score < 80:
  print('you get a normal score!')
elif score >= 80 :
  print('you get a great score!')
else:
  print('you fail!')
```

```python
if score == 0 or score == 100:
  print('awesome!')
else:
  print('you score is normal!')
```

### 循环

```flow
st=>start
e=>end
cond=>condition: 是否完成
op1=>operation: 执行操作1
op2=>operation: 执行操作2
st->op1->cond
cond(yes)->e
cond(no)->op2->op1->cond
```

Python循环有`for`和`while`两种写法：

- **for** 循环
`for--in--`写法遍历**可迭代对象**，每次循环按顺序取出取出可迭代对象中的一个对象。

```python
item = [1,2,3,4]
for i in items:
    print(i)
```

输出：

```python
1
2
3
4
```

```python
for i in range(3):
    print(i)
```

输出：

```python
1
2
3
```

- **while**循环

`while`循环逻辑是：每次循环判断while后的代码块是否为非 `False` 、 `0`、空字符`''` 、空列表`[]`、空集合`set()`、空字典`{}`、空元组`()`之一，,则执行内部循环代码块：

```python
i = 5
while i:
    print(i)
    i -= 1
```

```python
5
4
3
2
1
```

### pass占位符

python中的`pass`代码功能主要作用是占位符的功能，比如编写代码块时未考虑编写实现逻辑，待python语法不允许空代码块，则使用`pass`代替，常见在基类结构中的方法代码中。

`pass`代码不执行任何操作

```python
def test():
  pass
```

### continue “继续继续”

`continue`使用在循环中，用于跳过循环体中`continue`后的代码块；

```python
i = 1
while True:
  if i%2 == 0:
    continue
  print(i)
```

```python
1
3
5
...
```

### break “停止停止”

`break`语句与`continue`相反，它的意思是执行到这条语句时就跳出循环；

```python
i = 0
while True:
  if i/5 == 1:
    break
  print(i)
```

···python
0
1
2
3
4
···
